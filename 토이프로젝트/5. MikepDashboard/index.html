<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css"> 
    <link rel="stylesheet" href="./treeview.css"> 
    <title>Mikep Admin DashBoard</title>
</head>
<body class="dark-theme-variables">
    
    <div class="container">
        <aside>
            <div class="top">
                <div class="logo">
                    <span class="material-icons">
                        admin_panel_settings
                    </span>
                    <h2>Mikep <span class="cobalt">Admin</span></h2>
                </div>
                <div class="close" id="close-btn">
                    <span class="material-icons">close</span>
                </div>
            </div>

            <div class="sidebar">
                <a href="#" class="active">
                    <span class="material-icons">dns</span>
                    <h3>배치프로그램</h3>
                </a>
                <a href="#">
                    <span class="material-icons">person_outline</span>
                    <h3>직인날인 시스템</h3>
                </a>
                <a href="#">
                    <span class="material-icons">receipt_long</span>
                    <h3>자료전송 시스템</h3>
                </a>
                <a href="#">
                    <!-- <span class="material-icons">logout</span> -->
                    <h3>Logout</h3>
                </a>
            </div>
        </aside>
        <!-- END OF ASIDE -->
        <main>
            <h1>배치프로그램</h1>
            <div class="insights">
                <div class="server">
                    <div class="node-list">
                        <div class="node">
                            <div>
                                <span class="material-icons">dns</span>
                                <h3>본사 서버</h3>
                            </div>
                            <span class="material-icons">keyboard_arrow_down</span>
                        </div>
                    </div>
                    <!-- START TREEVIEW -->
                    <div class="treeview">
                        <ul>
                            <li>
                                <span class="material-icons right-arrow active folder">chevron_right</span>
                                <span class="material-icons folder">folder_open</span>&nbsp;&nbsp;
                                <span class="node-name folder">본사 서버</span>
                                <ul class="nested active">
                                    <li>
                                        <span class="material-icons person">person</span>&nbsp;&nbsp;
                                        <span class="node-name">정승일</span>&nbsp;
                                        <span class="node-position">(사장)</span>
                                    </li>
                                    <li>
                                        <span class="material-icons person">person</span>&nbsp;&nbsp;
                                        <span class="node-name">홍길동</span>&nbsp;
                                        <span class="node-position">(부사장)</span>
                                    </li>
                                    <li>
                                        <span class="material-icons person">person</span>&nbsp;&nbsp;
                                        <span class="node-name">정재익</span>&nbsp;
                                        <span class="node-position">(감사실장)</span>
                                    </li>
                                    <li>
                                        <span class="material-icons right-arrow active folder">chevron_right</span>
                                        <span class="material-icons folder">folder_open</span>&nbsp;&nbsp;
                                        <span class="node-name folder">ICT 본부</span>
                                        <ul class="nested active">
                                            <li>
                                                <span class="material-icons person">person</span>&nbsp;&nbsp;
                                                <span class="node-name">황의조</span>&nbsp;
                                                <span class="node-position">(ICT본부장)</span>
                                            </li>
                                        </ul>
                                    </li>
                                    <li>
                                        <span class="material-icons right-arrow active folder">chevron_right</span>
                                        <span class="material-icons folder">folder_open</span>&nbsp;&nbsp;
                                        <span class="node-name folder">상생협력본부</span>
                                        <ul class="nested active">
                                            <li>
                                                <span class="material-icons person">person</span>&nbsp;&nbsp;
                                                <span class="node-name">콩순이</span>&nbsp;
                                                <span class="node-position">(상생협력본부장)</span>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="server">
                    <div class="node-list">
                        <div class="node">
                            <div>
                                <span class="material-icons">dns</span>
                                <h3>
                                    <select>
                                        <option>서울지역본부</option>
                                        <option>남서울지역본부</option>
                                        <option>경기지역본부</option>
                                    </select>
                                </h3>
                            </div>
                            <span class="material-icons">keyboard_arrow_down</span>
                        </div>
                    </div>
                    <!-- START TREEVIEW -->
                    <div class="treeview">
                        <ul>
                            <li>
                                <span class="material-icons right-arrow active folder">chevron_right</span>
                                <span class="material-icons folder">folder_open</span>&nbsp;&nbsp;
                                <span class="node-name folder">본사 서버</span>
                                <ul class="nested active">
                                    <li>
                                        <span class="material-icons person">person</span>&nbsp;&nbsp;
                                        <span class="node-name">정승일</span>&nbsp;
                                        <span class="node-position">(사장)</span>
                                    </li>
                                    <li>
                                        <span class="material-icons person">person</span>&nbsp;&nbsp;
                                        <span class="node-name">홍길동</span>&nbsp;
                                        <span class="node-position">(부사장)</span>
                                    </li>
                                    <li>
                                        <span class="material-icons person">person</span>&nbsp;&nbsp;
                                        <span class="node-name">정재익</span>&nbsp;
                                        <span class="node-position">(감사실장)</span>
                                    </li>
                                    <li>
                                        <span class="material-icons right-arrow active folder">chevron_right</span>
                                        <span class="material-icons folder">folder_open</span>&nbsp;&nbsp;
                                        <span class="node-name folder">ICT 본부</span>
                                        <ul class="nested active">
                                            <li>
                                                <span class="material-icons person">person</span>&nbsp;&nbsp;
                                                <span class="node-name">황의조</span>&nbsp;
                                                <span class="node-position">(ICT본부장)</span>
                                            </li>
                                        </ul>
                                    </li>
                                    <li>
                                        <span class="material-icons right-arrow active folder">chevron_right</span>
                                        <span class="material-icons folder">folder_open</span>&nbsp;&nbsp;
                                        <span class="node-name folder">상생협력본부</span>
                                        <ul class="nested active">
                                            <li>
                                                <span class="material-icons person">person</span>&nbsp;&nbsp;
                                                <span class="node-name">콩순이</span>&nbsp;
                                                <span class="node-position">(상생협력본부장)</span>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>     
                </div>
            </div>
            <!-- END OF INSIGHTS -->

            <div class="run">
                <span class="material-icons">play_arrow</span>
                <h2>프로그램 실행</h2>
            </div>

            <!-- END OF RUN -->
            <div class="batch">
                <div class="left">
                    <div class="node-list">
                        <div class="node">
                            <div>
                                <span class="material-icons">dns</span>
                                <h3>사업소 서버#1</h3>
                            </div>
                            <span class="material-icons">keyboard_arrow_down</span>
                        </div>
                        <div class="node batch-node" id="webgrp_su">
                            <div>
                                <span class="material-icons">computer</span>
                                <h3>서울지역본부 서버</h3>
                            </div>
                            <span class="material-icons check-box">check_box_outline_blank</span>
                        </div>
                        <div class="node batch-node" id="webgrp_ns">
                            <div>
                                <span class="material-icons">computer</span>
                                <h3>남서울지역본부 서버</h3>
                            </div>
                            <span class="material-icons check-box">check_box_outline_blank</span>
                        </div>
                        <div class="node batch-node" id="webgrp_ns">
                            <div>
                                <span class="material-icons">computer</span>
                                <h3>경기지역본부 서버</h3>
                            </div>
                            <span class="material-icons check-box">check_box_outline_blank</span>
                        </div>
                        <div class="node batch-node" id="webgrp_ns">
                            <div>
                                <span class="material-icons">computer</span>
                                <h3>경기북부지역 서버</h3>
                            </div>
                            <span class="material-icons check-box">check_box_outline_blank</span>
                        </div>
                        <div class="node batch-node" id="webgrp_ns">
                            <div>
                                <span class="material-icons">computer</span>
                                <h3>인천지역본부 서버</h3>
                            </div>
                            <span class="material-icons check-box">check_box_outline_blank</span>
                        </div>
                    </div>
                </div>
                <div class="right">
                    <div class="node-list">
                        <div class="node">
                            <div>
                                <span class="material-icons">dns</span>
                                <h3>사업소 서버#2</h3>
                            </div>
                            <span class="material-icons">keyboard_arrow_down</span>
                        </div>
                        <div class="node batch-node" id="webgrp_su">
                            <div>
                                <span class="material-icons">computer</span>
                                <h3>서울지역본부 서버</h3>
                            </div>
                            <span class="material-icons check-box">check_box_outline_blank</span>
                        </div>
                        <div class="node batch-node" id="webgrp_ns">
                            <div>
                                <span class="material-icons">computer</span>
                                <h3>남서울지역본부 서버</h3>
                            </div>
                            <span class="material-icons check-box">check_box_outline_blank</span>
                        </div>
                        <div class="node batch-node" id="webgrp_ns">
                            <div>
                                <span class="material-icons">computer</span>
                                <h3>경기지역본부 서버</h3>
                            </div>
                            <span class="material-icons check-box">check_box_outline_blank</span>
                        </div>
                        <div class="node batch-node" id="webgrp_ns">
                            <div>
                                <span class="material-icons">computer</span>
                                <h3>경기북부지역 서버</h3>
                            </div>
                            <span class="material-icons check-box">check_box_outline_blank</span>
                        </div>
                        <div class="node batch-node" id="webgrp_ns">
                            <div>
                                <span class="material-icons">computer</span>
                                <h3>인천지역본부 서버</h3>
                            </div>
                            <span class="material-icons check-box">check_box_outline_blank</span>
                        </div>
                    </div>
                </div>
            </div>
            
        </main>
        <!-- END OF MAIN -->
        <div class="right">
            <div class="top">
                <button id="menu-btn">
                    <span class="material-icons">menu</span>
                </button>
                <div class="theme-toggler">
                    <span class="material-icons">wb_sunny</span>
                    <span class="material-icons active">nights_stay</span>
                </div>
                <div class="profile">
                    <div class="info">
                        <p>Hey, <b>Admin</b></p>
                        <small class="text-muted">2022-11-26</small>
                    </div>
                    <div class="profile-photo">
                        <img src="./images/people-icon.jpeg" alt="">
                    </div>
                </div>
            </div>
            <!--END OF TOP -->
            <div class="recent-updates">
                <h2>Recent History</h2>
                <div class="updates">
                    <div class="update">
                        <div class="profile-photo">
                            <span class="material-icons">account_circle</span>
                        </div>
                        <div class="message">
                            <p><b>관리자</b> 배치프로그램을 수행하였습니다</p>
                            <small class="text-muted">2 Minutes Ago</small>
                        </div>
                    </div>
                    <div class="update">
                        <div class="profile-photo">
                            <span class="material-icons">account_circle</span>
                        </div>
                        <div class="message">
                            <p><b>직인날인</b> 배치프로그램을 수행하였습니다</p>
                            <small class="text-muted">10 Minutes Ago</small>
                        </div>
                    </div>
                    <h4>show more</h4>
                </div>
            </div>
            <!-- END OF RECENT HISTORY -->
            <div class="sales-analytics">
                <h2>Update Query</h2>
                <div class="item online">
                    <div class="icon">
                        <span class="material-icons">update</span>
                    </div>
                    <div class="right">
                        <div class="info">
                            <h3>부서 배치프로그램</h3>
                            <small class="text-muted">Last 24 Hours</small>
                        </div>
                        <h5 class="success">테스트</h5>
                    </div>
                </div>
                <div class="item offline">
                    <div class="icon">
                        <span class="material-icons">delete</span>
                    </div>
                    <div class="right">
                        <div class="info">
                            <h3>비어있는 데이터 삭제</h3>
                            <small class="text-muted">Last 24 Hours</small>
                        </div>
                        <h5 class="danger">운영</h5>
                    </div>
                </div>
                <div class="item customers">
                    <div class="icon">
                        <span class="material-icons">person</span>
                    </div>
                    <div class="right">
                        <div class="info">
                            <h3>History 초기화</h3>
                            <small class="text-muted">Last 24 Hours</small>
                        </div>
                        <h5 class="success">테스트</h5>
                    </div>
                </div>
                <div class="item add-product">
                    <div>
                        <span class="material-icons">add</span>
                        <h3>Add Product</h3>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        var toggleNode = document.getElementsByClassName('folder');

        for(var i = 0; i < toggleNode.length; i++){
            toggleNode[i].addEventListener('click', function(){
                this.parentElement.querySelector('.nested').classList.toggle('active');
                this.parentElement.querySelector('.right-arrow').classList.toggle('active');
            })
        }

        var toggleServer = document.getElementsByClassName('batch-node');
        
        //batchArray에 server_id 값 누적
        var batchArray = new Array();
        
        for(var i = 0; i < toggleServer.length; i++){
            toggleServer[i].addEventListener('click', function(){
                var checks = this.querySelector('.check-box');
                console.log(checks.innerHTML);
                if(checks.innerHTML == "check_box"){
                    checks.innerHTML = "check_box_outline_blank";
                }else{
                    checks.innerHTML = "check_box";
                }
                var server_id = this.getAttribute('id');
                console.log(server_id);
                var flag = false;
                var remove_number = 0;
                for(var i = 0; i < batchArray.length; i++){
                    if(batchArray[i] == server_id){
                        flag = true;
                        remove_number = i;
                    } 
                }

                if(!flag) batchArray.push(server_id);
                else batchArray.splice(remove_number, 1);

                console.log(batchArray); 
            })
        }

        const sideMenu = document.querySelector("aside");
        const menuBtn = document.querySelector("#menu-btn");
        const closeBtn = document.querySelector("#close-btn");
        const themeToggler = document.querySelector(".theme-toggler");

        menuBtn.addEventListener('click', () => {
            sideMenu.style.display = 'block';
        })

        closeBtn.addEventListener('click', () => {
            sideMenu.style.display = 'none';
        })

        themeToggler.addEventListener('click', ()=>{
            document.body.classList.toggle('dark-theme-variables');

            themeToggler.querySelector('span:nth-child(1)').classList.toggle('active');
            themeToggler.querySelector('span:nth-child(2)').classList.toggle('active');

            //themeToggler.querySelector('span').classList.toggle('active');
        })

    </script>
</body>
</html>